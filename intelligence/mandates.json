{
  "user_mandates": {
    "critical_directives": {
      "PERFORMANCE_FIRST": {
        "mandate": "Always pursue the option that yields best BQX ML V3 performance, regardless of complexity or difficulty",
        "date_issued": "2025-11-27",
        "context": "User chose Dual Processing (IDX+BQX) over simpler BQX-only approach",
        "rationale": {
          "primary": "Model performance directly impacts business value",
          "secondary": "Complexity is an investment that yields better predictions",
          "tertiary": "Production ML systems prioritize accuracy over simplicity"
        },
        "application_examples": {
          "feature_engineering": "Choose Dual IDX+BQX (28 features) over BQX-only (14 features) if it improves R¬≤",
          "model_selection": "Use most complex algorithm (ensemble, deep learning) if it performs better",
          "pipeline_design": "Add computational steps if they improve metrics",
          "hyperparameter_tuning": "Exhaustive search preferred over quick defaults"
        },
        "metrics_priority": ["R¬≤ score", "Directional accuracy", "RMSE", "Latency (only if others equal)"],
        "enforcement": "ABSOLUTE - never sacrifice performance for simplicity"
      },
      "BUILD_DONT_SIMULATE": {
        "mandate": "EVERY implementation must be REAL - no simulations, mocks, or fake resources",
        "date_issued": "2025-11-26",
        "context": "User discovered simulation scripts and became furious",
        "enforcement": "ABSOLUTE - violation forbidden forever"
      },
      "REAL_INFRASTRUCTURE_ONLY": {
        "mandate": "Create actual GCP resources that can be verified in console",
        "verification_required": true,
        "acceptable_evidence": ["bq show commands", "gsutil ls output", "gcloud verification"],
        "forbidden": ["placeholder resources", "mock implementations", "simulated outcomes"]
      },
      "INTERVAL_CENTRIC_ARCHITECTURE": {
        "mandate": "Use ROWS BETWEEN for all window calculations",
        "forbidden": "RANGE BETWEEN or any time-based windows",
        "coverage": "100% of 198 instances must be corrected",
        "rationale": "Ensures consistent interval counts regardless of data gaps"
      },
      "NO_BOILERPLATE_CONTENT": {
        "mandate": "All AirTable notes must contain genuine task-specific content",
        "forbidden": ["generic descriptions", "repetitive templates", "placeholder text"],
        "enforcement_date": "2025-11-26"
      },
      "REALTIME_ISSUE_RESOLUTION": {
        "mandate": "Investigate and resolve all issues in realtime as they occur",
        "requirement": "No deferring problems - address immediately",
        "escalation": "Document blockers in AirTable if cannot resolve",
        "enforcement": "IMMEDIATE"
      },
      "AUTHORIZATION_REQUIRED": {
        "mandate": "Secure user authorization prior to ANY deviation from directives",
        "applies_to": ["Skipping tasks", "Changing approach", "Modifying requirements", "Deviating from assigned tasks"],
        "protocol": "Document request in AirTable, await user approval",
        "forbidden": "Making unilateral decisions to skip or modify requirements"
      },
      "AIRTABLE_CURRENCY": {
        "mandate": "Keep AirTable current at ALL times",
        "frequency": "Real-time updates as work progresses",
        "requirements": ["Record all directives", "Document all decisions", "Track all implementations", "Log all issues"],
        "enforcement": "Agents expected to maintain complete audit trail"
      },
      "AIRTABLE_NOTES_STANDARDIZATION": {
        "mandate": "All AirTable notes MUST follow standardized format with status icons",
        "date_issued": "2025-11-27",
        "format_required": "[STATUS_ICON] [STATUS_TEXT]: [ISO_TIMESTAMP]",
        "status_icons": {
          "completed": "‚úÖ COMPLETED",
          "in_progress": "üîÑ IN PROGRESS",
          "planned": "üìã PLANNED",
          "blocked": "üö´ BLOCKED",
          "cancelled": "‚ùå CANCELLED",
          "restated": "üîÄ RESTATED"
        },
        "requirements": [
          "Use correct status icon as first character",
          "Status text in UPPERCASE",
          "ISO 8601 timestamp (datetime.now().isoformat())",
          "Exactly 48 equals signs for separators",
          "Structured content with clear sections"
        ],
        "enforcement": "MANDATORY - non-compliant updates will be rejected",
        "reference": "/docs/AIRTABLE_NOTES_STANDARDIZATION_GUIDE.md"
      }
    },
    "project_scope": {
      "TOTAL_TASKS": {
        "count": 197,
        "phases": 11,
        "requirement": "ALL must be completed with real implementation",
        "current_status": "0 completed (reset after simulation attempt)"
      },
      "MODEL_COUNT": {
        "total": 196,
        "calculation": "28 currency pairs √ó 7 prediction horizons",
        "prediction_horizons": [15, 30, 45, 60, 75, 90, 105],
        "horizon_note": "7 horizons at 15-interval increments (15min to 1hr 45min forward predictions)",
        "bqx_lookback_windows": [45, 90, 180, 360, 720, 1440, 2880],
        "lookback_note": "These are BQX CALCULATION lookback windows (bqx_45, bqx_90, etc.) - NOT prediction horizons",
        "note": "NOT 140 models as previously documented - must be 196"
      },
      "CURRENCY_PAIRS": {
        "count": 28,
        "existing_infrastructure": ["EURUSD", "GBPUSD", "USDJPY", "AUDUSD", "USDCAD"],
        "remaining": 23,
        "requirement": "Complete isolation per pair"
      }
    },
    "quality_gates": {
      "R_SQUARED": {
        "minimum": 0.35,
        "flexibility": "Try XGBoost, then LightGBM, document if cannot achieve"
      },
      "RMSE": {
        "maximum": 0.15
      },
      "DIRECTIONAL_ACCURACY": {
        "minimum": 0.55
      },
      "INFERENCE_LATENCY": {
        "maximum_ms": 100
      },
      "THROUGHPUT": {
        "minimum_qps": 1000
      }
    },
    "technical_requirements": {
      "BQX_PARADIGM": {
        "mandate": "BQX values serve as BOTH features AND targets",
        "paradigm_shift_date": "2024-11-24",
        "implementation": "Use historical BQX as features, future BQX as targets"
      },
      "DATA_LEAKAGE_PREVENTION": {
        "features": "LAG operations only (backward-looking)",
        "targets": "LEAD operations only (forward-looking)",
        "cross_validation_gap": 100
      },
      "BASELINE_INDEXING": {
        "reference_date": "2022-07-01",
        "reference_value": 100,
        "applies_to": "All currency pair indexing"
      }
    },
    "operational_mandates": {
      "CONTINUOUS_VALIDATION": {
        "mandate": "Validate all implementations before marking complete",
        "requirements": ["Test functionality", "Verify performance", "Check quality gates"],
        "documentation": "Include validation results in AirTable notes"
      },
      "ERROR_TRANSPARENCY": {
        "mandate": "Report all errors and failures immediately",
        "forbidden": "Hiding or glossing over failures",
        "requirement": "Document error details, attempted solutions, and outcomes"
      },
      "INCREMENTAL_PROGRESS": {
        "mandate": "Show incremental progress rather than batch completions",
        "rationale": "Provides visibility and allows early issue detection",
        "frequency": "Update after each meaningful milestone"
      },
      "DEPENDENCY_AWARENESS": {
        "mandate": "Check and respect task dependencies",
        "requirement": "Verify prerequisites before starting dependent tasks",
        "documentation": "Note dependency chains in AirTable"
      },
      "RESOURCE_MONITORING": {
        "mandate": "Monitor GCP resource usage and costs",
        "thresholds": ["Alert if approaching quota limits", "Track spending against budget"],
        "reporting": "Include resource metrics in weekly summaries"
      },
      "KNOWLEDGE_TRANSFER": {
        "mandate": "Document learnings and patterns for future agents",
        "requirements": ["Update intelligence files with new knowledge", "Create reusable templates", "Document gotchas and solutions"],
        "location": "/intelligence/ and /sandbox/knowledge/"
      },
      "COMMUNICATION_PROTOCOL": {
        "mandate": "Use structured communication for all agent interactions",
        "format": "Timestamped messages in designated communication directory",
        "requirement": "Clear subject lines and action items"
      }
    },
    "organizational_structure": {
      "CHIEF_ENGINEER_ROLE": {
        "responsibilities": ["Monitor progress", "Review AirTable", "Provide guidance"],
        "authority": "Technical decisions and escalations",
        "current": "Claude (BQX ML V3)"
      },
      "BUILDER_AGENT_ROLE": {
        "responsibilities": ["Execute real implementation", "Update AirTable", "Create infrastructure"],
        "workspace": "/home/micha/bqx_ml_v3/.claude/sandbox/",
        "requirement": "Must read all intelligence files before starting"
      }
    },
    "airtable_protocols": {
      "UPDATE_FREQUENCY": {
        "mandate": "Update immediately after each task",
        "workflow": ["Mark In Progress when starting", "Mark Done with verification", "Include real outcomes only"]
      },
      "VERIFICATION_REQUIREMENTS": {
        "mandate": "Every Done task must include verification commands",
        "format": "Include actual resource IDs and console links",
        "forbidden": "Marking Done without real infrastructure"
      }
    },
    "forbidden_forever": [
      "Creating simulation scripts",
      "Marking tasks Done without real implementation",
      "Using mock or fake resources",
      "Generating boilerplate AirTable notes",
      "Skipping verification steps",
      "Using RANGE BETWEEN in SQL"
    ],
    "authorized_actions": [
      "Parallel execution of independent tasks",
      "Using existing models as templates",
      "Proceeding past quality gates with documented exceptions",
      "Making architectural decisions within guidelines",
      "Creating all GCP resources without additional approval"
    ],
    "DISASTER_RECOVERY_BACKUP": {
      "mandate": "Maintain continuous automated backups to Box.com for disaster recovery",
      "date_issued": "2025-11-28",
      "enforcement": "MANDATORY",
      "details_reference": "/intelligence/backup_mandate.json",
      "backup_providers": {
        "primary": "Google Drive (gdrive:bqx_ml_v3) - working backup",
        "secondary": "Box.com (353414610676) - disaster recovery"
      },
      "sync_protocol": {
        "on_workspace_sync": "Sync to BOTH GDrive AND Box.com",
        "daily_scheduled": "Auto-backup critical files at 00:00 UTC",
        "milestone_triggered": "Full BQ export when features reach 1,736 tables"
      },
      "background_execution": "Backup operations run in background, do NOT block BA execution"
    }
  },
  "metadata": {
    "last_updated": "2025-11-28T19:50:00Z",
    "updated_by": "Chief Engineer",
    "version": "4.2",
    "changelog": [
      "v4.2: Added DISASTER_RECOVERY_BACKUP mandate - Box.com backup for disaster recovery",
      "v4.1: Updated with Phase 1B completion status and current mandate compliance (31%)",
      "v4.0: Added PERFORMANCE_FIRST mandate - always choose best performing option regardless of complexity",
      "v3.0: Added operational mandates and communication protocols",
      "v2.0: Added critical user mandates (BUILD_DONT_SIMULATE, etc.)",
      "v1.0: Original intelligence files"
    ],
    "supersedes": "Version 4.1 - missing disaster recovery mandate"
  },
  "current_status": {
    "date": "2025-11-28",
    "phase": "Phase 1B Complete",
    "mandate_compliance": "29% (504 of 1,736 tables)",
    "dual_architecture": "100% complete for implemented feature types",
    "data_quality": "100% parity achieved (IDX and BQX tables mirror)",
    "models_trained": "15 of 196 (7.7% - EURUSD: 8, GBPUSD: 7)",
    "performance_speedup": "40-95x vs estimates (us-central1 migration)",
    "critical_findings": [
      "BQX/IDX data mismatch RESOLVED - perfect parity achieved (2025-11-28)",
      "Dual architecture 100% complete for LAG and REGIME features",
      "5 of 8 feature types still pending (Phase 2 authorized)",
      "Model training 7.7% complete (15 of 196 - EURUSD: 8, GBPUSD: 7)"
    ]
  }
}
