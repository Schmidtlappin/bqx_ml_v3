{
  "architectural_constraints": {
    "interval_centric_mandate": {
      "rule": "ALL calculations MUST use ROWS BETWEEN",
      "forbidden": ["INTERVAL", "DATE_SUB", "DATE_ADD", "time-based windows"],
      "allowed": "ROWS BETWEEN N PRECEDING AND CURRENT ROW",
      "rationale": "Ensures consistent sample sizes regardless of data gaps",
      "severity": "CRITICAL - violations break core paradigm"
    },
    "model_isolation": {
      "rule": "Each currency pair has completely independent model",
      "forbidden": ["cross-pair features", "shared parameters", "multi-pair training"],
      "allowed": "Per-pair features, parameters, and datasets",
      "rationale": "Each pair has unique dynamics",
      "severity": "CRITICAL - violations compromise model accuracy"
    },
    "bqx_paradigm": {
      "old_rule": "BQX values ONLY as targets (DEPRECATED 2024-11-24)",
      "new_rule": "BQX values as BOTH features (lags) AND targets (leads)",
      "rationale": "Historical BQX contains momentum signals for future BQX",
      "implementation": "Include bqx_*_lag_1 through bqx_*_lag_60 in features",
      "severity": "CRITICAL - paradigm shift enables autoregressive prediction"
    }
  },
  "data_constraints": {
    "quality_requirements": {
      "completeness": "No missing values in features or targets",
      "consistency": "All tables must have same bar_start_time alignment",
      "accuracy": "Price data validated against multiple sources",
      "timeliness": "Data latency < 1 second for real-time predictions"
    },
    "storage_limits": {
      "bigquery_dataset": "1TB quota",
      "table_size": "Max 1GB per table",
      "query_timeout": "60 seconds",
      "daily_queries": "10,000 quota"
    },
    "feature_limits": {
      "max_features_per_model": 500,
      "max_lag_periods": 60,
      "min_training_samples": 10000,
      "feature_correlation_threshold": 0.95
    }
  },
  "computational_constraints": {
    "resource_limits": {
      "memory_per_model": "8GB",
      "cpu_cores": "4 per model training",
      "gpu_allocation": "1 GPU shared across 5 models",
      "training_time_limit": "4 hours per model"
    },
    "performance_requirements": {
      "inference_latency": "< 100ms per prediction",
      "batch_prediction_throughput": "> 1000 predictions/second",
      "api_response_time": "< 200ms (95th percentile)",
      "uptime_sla": "99.9%"
    }
  },
  "business_constraints": {
    "regulatory": {
      "data_retention": "7 years minimum",
      "audit_trail": "All predictions must be logged",
      "compliance": "GDPR, SOC2, ISO27001"
    },
    "operational": {
      "deployment_window": "Off-peak hours only (0:00-4:00 UTC)",
      "rollback_capability": "Immediate rollback within 5 minutes",
      "zero_downtime": "Blue-green deployment required"
    }
  },
  "development_constraints": {
    "code_quality": {
      "test_coverage": "Minimum 80%",
      "linting": "PEP 8 compliant",
      "type_hints": "Required for all functions",
      "documentation": "Docstrings for all public APIs"
    },
    "version_control": {
      "branch_protection": "main branch protected",
      "commit_signing": "Required for production",
      "secret_scanning": "Enabled and enforced",
      "code_review": "Minimum 1 approver"
    },
    "dependencies": {
      "python_version": ">= 3.10",
      "security_patches": "Applied within 7 days",
      "deprecated_libs": "Removed within 30 days",
      "license_compliance": "Only approved OSS licenses"
    }
  },
  "naming_conventions": {
    "tables": {
      "pattern": "{stage}_bqx_{pair}",
      "example": "lag_bqx_eurusd",
      "lowercase": true,
      "underscore_separated": true
    },
    "columns": {
      "pattern": "{feature}_{suffix}",
      "examples": ["close_lag_1", "bqx_mid_lag_5", "rsi_14"],
      "reserved": ["bar_start_time", "pair_id"]
    },
    "models": {
      "pattern": "{pair}_{algorithm}_v{version}",
      "example": "eurusd_xgboost_v1",
      "lowercase": true
    }
  },
  "validation_rules": {
    "pre_deployment": [
      "All tests passing",
      "No security vulnerabilities",
      "Performance benchmarks met",
      "Documentation updated"
    ],
    "data_pipeline": [
      "Schema validation",
      "Row count checks",
      "Value range validation",
      "Null value detection"
    ],
    "model_training": [
      "Minimum sample size",
      "Feature correlation check",
      "Overfitting detection",
      "Performance threshold"
    ]
  }
}
