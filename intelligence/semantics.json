{
  "core_concepts": {
    "BQX": {
      "definition": "Proprietary momentum indicator measuring percentage change over lookback period",
      "purpose": "Primary target for prediction AND feature for autoregressive modeling",
      "components": ["bqx_45", "bqx_90", "bqx_180", "bqx_360", "bqx_720", "bqx_1440", "bqx_2880"],
      "paradigm_shift": "BQX values can now be used as BOTH features AND targets (since 2024-11-24)",
      "calculation": "((current_close - lag_close) / lag_close) * 100",
      "status": "Implemented in all 28 {pair}_bqx tables"
    },
    "IDX": {
      "definition": "Indexed price data normalized to base=100",
      "purpose": "Price-based features for model training",
      "calculation": "(current_close / base_close) * 100",
      "status": "Implemented in all 28 {pair}_idx tables",
      "row_count": "~2.17M per pair (6 years)"
    },
    "Dual_Architecture": {
      "definition": "All features exist in both IDX and BQX variants",
      "implemented_types": ["LAG", "REGIME"],
      "pending_types": ["REGRESSION", "AGGREGATION", "ALIGNMENT", "MOMENTUM", "VOLATILITY"],
      "status": "100% complete for implemented types (as of 2025-11-28)",
      "rationale": "Models learn from both price patterns (IDX) and momentum patterns (BQX)"
    },
    "Interval_Centric": {
      "definition": "All calculations use row-based windows (ROWS BETWEEN) instead of time-based",
      "rationale": "Ensures consistent sample sizes regardless of data gaps",
      "implementation": "ROWS BETWEEN N PRECEDING AND CURRENT ROW",
      "forbidden": "Any time-based windows (e.g., INTERVAL, date arithmetic)",
      "status": "Applied to all feature calculations"
    },
    "Independent_Models": {
      "definition": "Each currency pair-horizon has its own isolated model ensemble",
      "count_planned": 784,
      "count_trained": 0,
      "breakdown": "28 pairs × 7 horizons × 4 ensemble members",
      "horizons": ["h15", "h30", "h45", "h60", "h75", "h90", "h105"],
      "ensemble_members": ["LightGBM", "XGBoost", "CatBoost", "Meta-learner"],
      "isolation": "Complete - no feature or data sharing between pairs",
      "rationale": "Each pair has unique dynamics requiring specialized modeling",
      "accuracy_target": "95%+ directional accuracy",
      "deployment_strategy": "Deploy farthest horizon achieving ≥95% per pair",
      "status": "PENDING - V2 migration in progress (~62% complete)"
    },
    "Feature_Target_Separation": {
      "old_rule": "BQX values strictly prohibited as features",
      "new_rule": "BQX values can be features (lags) AND targets (forward predictions)",
      "features": "Historical (backward-looking) data including BQX lags",
      "targets": "Future (forward-looking) BQX predictions",
      "implementation_date": "2024-11-24 paradigm shift"
    }
  },
  "terminology": {
    "Lag": "Historical value N bars ago (e.g., close_lag_1, bqx_lag_1)",
    "Lead": "Future value N bars ahead (used for target calculation)",
    "Regime": "Market state categorization (trending, ranging, volatile, calm)",
    "Centric": "Calculation perspective (Primary, Variant, Covariant, Triangulation, Secondary, Tertiary)",
    "Cell_Type": "Unique combination of feature × centric × variant",
    "Table": "BigQuery table containing specific feature set for a currency pair",
    "Stage": "Project plan stage in AirTable (70 total)",
    "Phase": "Project plan phase in AirTable (11 total)",
    "m1": "1-minute bar data (OHLCV)",
    "idx": "Indexed price data (normalized to base=100)",
    "bqx": "Backward momentum (percentage change over lookback)"
  },
  "feature_categories": {
    "Price_Features": {
      "base": ["open", "high", "low", "close", "volume"],
      "derived": ["returns", "log_returns", "volatility", "range"],
      "lags": "1-60 bars historical",
      "status": "Available in m1_* and idx_* tables"
    },
    "BQX_Features": {
      "base": ["bqx_45", "bqx_90", "bqx_180", "bqx_360", "bqx_720", "bqx_1440", "bqx_2880"],
      "derived": ["bqx_momentum", "bqx_volatility", "bqx_regime"],
      "lags": "1-60 bars historical (NEW - paradigm shift!)",
      "status": "Implemented in lag_bqx_* and regime_bqx_* tables (56 + 56 = 112 tables)"
    },
    "LAG_Features": {
      "idx_variant": "56 tables (lag_{pair}_45, lag_{pair}_90)",
      "bqx_variant": "56 tables (lag_bqx_{pair}_45, lag_bqx_{pair}_90)",
      "status": "100% complete",
      "completion_date": "2025-11-28"
    },
    "REGIME_Features": {
      "idx_variant": "56 tables (regime_{pair}_45, regime_{pair}_90)",
      "bqx_variant": "56 tables (regime_bqx_{pair}_45, regime_bqx_{pair}_90)",
      "categories": ["HIGH_VOL", "LOW_VOL", "NORMAL", "STRONG_UP", "STRONG_DOWN", "RANGING"],
      "status": "100% complete",
      "completion_date": "2025-11-28"
    },
    "CORRELATION_Features": {
      "fx_correlation": "168 tables (corr_{pair1}_{pair2})",
      "ibkr_correlation": "56 tables (corr_{pair}_{instrument})",
      "total": "224 tables",
      "status": "100% complete",
      "completion_date": "2025-11-28",
      "note": "Single-variant only (no BQX variant needed for correlation)"
    },
    "REGRESSION_Features": {
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "AGGREGATION_Features": {
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "ALIGNMENT_Features": {
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "MOMENTUM_Features": {
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "VOLATILITY_Features": {
      "status": "NOT STARTED",
      "planned_tables": 224
    }
  },
  "model_types": {
    "base_algorithms": [
      "LightGBM",
      "XGBoost",
      "CatBoost"
    ],
    "meta_learner": "LSTM or Logistic Regression",
    "ensemble_strategy": "Stacking: 3 base learners → Meta-learner",
    "total_models_planned": 784,
    "total_models_trained": 0,
    "breakdown": "28 pairs × 7 horizons × 4 ensemble members",
    "horizons": [15, 30, 45, 60, 75, 90, 105],
    "horizon_definition": "7 prediction horizons at 15-interval increments (h15 through h105)",
    "horizon_targets": "Each model predicts bqx_* values N intervals into the future",
    "deployment_strategy": "Deploy FARTHEST horizon achieving ≥95% accuracy per pair",
    "accuracy_target": "95%+ directional accuracy",
    "critical_distinction": "These are PREDICTION horizons (forward-looking), NOT BQX calculation windows (backward-looking)",
    "validation": "Walk-forward validation (MANDATORY for time series)",
    "feature_selection": "SHAP values for top 500-1,000 features",
    "status": "PENDING - V2 migration must complete first"
  },
  "data_pipeline_stages": {
    "ingestion": {
      "description": "Raw market data → m1_* tables",
      "status": "COMPLETE",
      "tables": 804
    },
    "indexing": {
      "description": "Price normalization → {pair}_idx tables",
      "status": "COMPLETE",
      "tables": 28
    },
    "momentum": {
      "description": "BQX calculation → {pair}_bqx tables",
      "status": "COMPLETE (regenerated 2025-11-28)",
      "tables": 28
    },
    "lag": {
      "description": "Historical feature calculation → lag_* tables",
      "status": "COMPLETE",
      "tables": 112
    },
    "regime": {
      "description": "Market state classification → regime_* tables",
      "status": "COMPLETE",
      "tables": 112
    },
    "correlation": {
      "description": "Cross-pair relationships → corr_* tables",
      "status": "COMPLETE",
      "tables": 224
    },
    "regression": {
      "description": "Polynomial trends and predictions",
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "aggregation": {
      "description": "Statistical summaries across windows",
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "alignment": {
      "description": "Cross-timeframe coherence",
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "momentum_advanced": {
      "description": "ROC, acceleration, persistence",
      "status": "NOT STARTED",
      "planned_tables": 224
    },
    "volatility": {
      "description": "ATR, realized vol, Bollinger metrics",
      "status": "NOT STARTED",
      "planned_tables": 224
    }
  },
  "quality_metrics": {
    "v2_migration_progress": "62% (~2,609 / 4,218 tables)",
    "source_v2_complete": "100% (2,209 tables)",
    "covariance_progress": "55% (1,299 / 2,352 tables)",
    "regime_complete": "100% (354 tables)",
    "dual_architecture": "100% for completed types",
    "data_parity": "100% (IDX and BQX tables mirror each other)",
    "row_counts": "~2.17M per table (6 years of data)",
    "partitioning": "DATE(interval_time)",
    "clustering": "pair (or pair1 for covariance)",
    "models_trained": "0 of 784 (0%)",
    "accuracy_target": "95%+ directional accuracy"
  }
}
