{
  "permissions": {
    "allow": [
      "Bash(/dev/null)",
      "Bash(if [ -f /tmp/data_parity_validation_results.json ])",
      "Bash(then cat /tmp/data_parity_validation_results.json)",
      "Bash(else echo \"Results not yet available\")",
      "Bash(for dataset in bqx_bq_uscen1 bqx_ml_v3_features bqx_ml_v3_models bqx_ml_v3_predictions bqx_ml_v3_analytics bqx_ml_v3_staging)",
      "Bash(for bucket in gs://bqx-ml-v3-models gs://bqx-ml-bqx-ml-artifacts gs://bqx-ml-bqx-ml-results)",
      "Bash(do echo \"=== $bucket ===\")",
      "Bash(bash:*)",
      "Bash(bq query:*)",
      "Bash(bq ls:*)",
      "Bash(python3:*)",
      "Bash(gcloud secrets list:*)",
      "Bash(gcloud secrets versions access:*)",
      "Bash(rclone version:*)",
      "Bash(rclone listremotes:*)",
      "Bash(rclone lsd:*)",
      "Bash(pip3 show:*)",
      "Bash(pip3 install:*)",
      "Bash(pip show:*)",
      "Bash(pip3 uninstall:*)",
      "Bash(pip3 --version:*)",
      "Bash(chmod:*)",
      "Bash(timeout 180 python3:*)",
      "Bash(./scripts/sync-workspace.sh:*)",
      "Bash(cat:*)",
      "Bash(bq show:*)",
      "Bash(docker --version:*)",
      "Bash(gcloud --version:*)",
      "Bash(gsutil ls:*)",
      "Bash(gcloud secrets create:*)",
      "Bash(gcloud secrets versions add:*)",
      "Bash(docker build:*)",
      "Bash(gcloud builds submit:*)",
      "Bash(gsutil iam ch:*)",
      "Bash(gcloud projects add-iam-policy-binding:*)",
      "Bash(gcloud artifacts repositories create:*)",
      "Bash(gcloud artifacts repositories add-iam-policy-binding:*)",
      "Bash(gcloud run deploy:*)",
      "Bash(gcloud secrets versions list:*)",
      "Bash(bq mk:*)",
      "Bash(git add:*)",
      "Bash(.claude/sandbox/communications/ )",
      "Bash(docs/AIRTABLE_COMPLETION_CONFIRMATION.md )",
      "Bash(docs/MULTI_HORIZON_PREDICTION_CAPABILITIES.md )",
      "Bash(intelligence/ )",
      "Bash(scripts/create_multimodel_serving_tasks.py )",
      "Bash(scripts/prepare_training_dataset.py )",
      "Bash(scripts/phase25b_redo/ )",
      "Bash(scripts/sync-box-backup.py )",
      "Bash(scripts/sync-workspace.sh:*)",
      "Bash(docs/status_reports/ )",
      "Bash(configs/)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(timeout 30 python3:*)",
      "Bash(gcloud secrets describe:*)",
      "Bash(gcloud iam service-accounts describe:*)",
      "Bash(gcloud iam service-accounts create:*)",
      "Bash(SA_NAME=\"bq-to-box-sync@bqx-ml.iam.gserviceaccount.com\":*)",
      "Bash(gcloud builds list:*)",
      "Bash(gcloud builds log:*)",
      "Bash(gcloud services enable:*)",
      "Bash(gcloud projects describe:*)",
      "Bash(gcloud scheduler jobs list:*)",
      "Bash(gcloud run services describe:*)",
      "Bash(git mv:*)"
    ],
    "deny": [],
    "ask": []
  },
  "context": {
    "role": "BQXML CHIEF ENGINEER",
    "project": "BQX ML v3 - 28 Independent Models",
    "repository": "https://github.com/Schmidtlappin/bqx_ml_v3",
    "instance": "bqx-ml-master (34.148.152.67)",
    "airtable_project": "P03",
    "current_phase": "P03.2 - Data Pipeline",
    "PARADIGM_SHIFT_2024_11_24": {
      "CRITICAL": "BQX values can now be used as BOTH features AND targets",
      "OLD_RULE": "BQX values were restricted to targets only",
      "NEW_RULE": "BQX values (bqx_ask, bqx_bid, bqx_mid) can be features AND targets",
      "IMPACT": "Include BQX lags in feature engineering for autoregressive prediction"
    },
    "UPDATED_CRITICAL_MANDATES": {
      "1_BQX_USAGE": "BQX values can be BOTH features AND targets (paradigm shift!)",
      "2_INTERVAL_CENTRIC": "Use ROWS BETWEEN only, NEVER time-based windows",
      "3_INDEPENDENT_MODELS": "28 completely isolated models, no cross-contamination",
      "4_AIRTABLE_TRUTH": "P03 is the single source of truth for all work"
    },
    "feature_engineering_update": {
      "include_bqx_lags": true,
      "bqx_features": [
        "bqx_ask_lag_1 through bqx_ask_lag_60",
        "bqx_bid_lag_1 through bqx_bid_lag_60",
        "bqx_mid_lag_1 through bqx_mid_lag_60"
      ],
      "rationale": "Historical BQX values contain momentum signals that predict future BQX"
    },
    "current_tasks": [
      "Create lag_bqx_* tables WITH BQX features (paradigm shift)",
      "Create regime_bqx_* tables including BQX regimes",
      "Create agg_bqx_* tables with BQX aggregations",
      "Create align_bqx_* tables with all features including BQX"
    ],
    "validation_rules_updated": [
      "Check: BQX features ARE present in feature columns (paradigm shift)",
      "Check: All windows use ROWS BETWEEN",
      "Check: Model isolation maintained",
      "Check: AirTable progress updated"
    ],
    "key_documents": {
      "paradigm_shift": "/home/codespace/bqx_ml_v3/docs/PARADIGM_SHIFT_UPDATE_20241124.md",
      "updated_response": "/home/codespace/bqx_ml_v3/docs/MENTOR_RESPONSE_UPDATED_V2.md",
      "pipeline": "/home/codespace/bqx_ml_v3/docs/BQX_ML_V3_PIPELINE.md",
      "feature_matrix": "/home/codespace/bqx_ml_v3/docs/BQX_ML_FEATURE_MATRIX.md"
    },
    "sql_template_updated": "CREATE OR REPLACE TABLE bqx_ml.lag_bqx_[pair] AS SELECT *, LAG(close, 1) OVER (ORDER BY bar_start_time) AS close_lag_1, LAG(bqx_mid, 1) OVER (ORDER BY bar_start_time) AS bqx_mid_lag_1 /* NEW! */, ... FROM bqx_ml.regression_bqx_[pair]",
    "advantages_of_paradigm_shift": [
      "Autoregressive prediction capability",
      "Momentum persistence capture",
      "Enhanced prediction accuracy",
      "Natural time series progression"
    ]
  }
}
